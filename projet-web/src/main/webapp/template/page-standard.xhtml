<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title><ui:insert name="titre">Titre</ui:insert></title>

    <!-- CSS -->
    <h:outputStylesheet name="styles.css" library="css" />

    <!-- jQuery -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.js" type="text/javascript"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.12.1/jquery-ui.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.12.1/themes/smoothness/jquery-ui.css" />

    <h:outputScript name="datepicker-fr.js" library="js" />

    <ui:insert name="head" />
</h:head>

<h:body>
    <ui:debug hotkey="x" rendered="#{initParam['javax.faces.PROJECT_STAGE'] == 'Development'}"/>

    <div id="body">

        <!-- ===================== HEADER ===================== -->
        <div id="header">
            <!-- Si non connectÃ© -->
            <h:outputText value="&nbsp;" rendered="#{not compteActif.loggedIn}" />

            <!-- Si connectÃ© -->
            <h:form rendered="#{compteActif.loggedIn}">

                <!-- ===================== Menu ADMIN ===================== -->
                <h:panelGroup rendered="#{compteActif.admin}">
                    <h:outputText value="ðŸ‘‘ Administration : " styleClass="menu-section-title"/>
                    <h:link outcome="comptes" value="Personnes" />
                    <h:link outcome="cultures" value="Cultures" />
                    <h:link outcome="entretiens" value="Entretiens" />
                    <h:link outcome="mouvements" value="Paiements" />
                    <h:link outcome="parcelles" value="Parcelles" />
                </h:panelGroup>

                <!-- ===================== Menu UTILISATEUR ===================== -->
                <h:panelGroup rendered="#{not compteActif.admin}">
                    <h:outputText value="ðŸ‘¤ Espace Utilisateur : " styleClass="menu-section-title"/>
                    <h:link outcome="home" value="Accueil" />
                    <h:link outcome="mesMouvements" value="Mes paiements" />
                    <h:link outcome="mesCultures" value="Mes cultures" /> 
                    <h:link outcome="mesParcelles" value="Mes parcelles" />
                    <!--  <h:link outcome="mesReservations" value="Mes rÃ©servations" /> -->
                    <h:link outcome="monCompte" value="Mon compte" />
                </h:panelGroup>

                <!-- ===================== DÃ©connexion ===================== -->
                <h:commandLink action="#{compteActif.disconnect()}" value="ðŸšª DÃ©connexion" />
            </h:form>
        </div>

        <!-- ===================== TITRE ===================== -->
        <h1><ui:insert name="titre">Titre absent</ui:insert></h1>

        <!-- ===================== MESSAGES ===================== -->
        <h:messages errorClass="error"
                    infoClass="info"
                    warnClass="warning"
                    styleClass="messages"
                    globalOnly="false" />

        <!-- ===================== CONTENU ===================== -->
        <div id="content">
            <ui:insert name="contenu">
                Contenu absent
            </ui:insert>
        </div>

        <!-- ===================== FOOTER ===================== -->
        <div id="footer">
            Â© <h:outputText value="#{utilJsf.now()}">
                <f:convertDateTime pattern="yyyy" />
            </h:outputText>
            - #{initParam['site.name']}
        </div>

    </div>
</h:body>
</html>
